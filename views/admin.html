
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Service Repair Admin</title>
  <style>body{font-family:system-ui,Arial;padding:20px} .card{border:1px solid #ddd;padding:12px;margin:8px 0;border-radius:6px}</style>
</head>
<body>
  <h1>Service Repair â€” Admin (minimal)</h1>
  <div id="root"></div>
  <script>
  (function(){
    const API = '/api';
    const pass = prompt('Enter admin password');
    if(!pass) { document.body.innerHTML = '<p>Admin password required</p>'; return; }
    const headers = {'x-admin-password': pass, 'Content-Type':'application/json'};
    async function fetchCategories(){ const r = await fetch(API + '/admin/categories', {headers}); return r.json(); }
    async function render(){
      const cats = await fetchCategories();
      const root = document.getElementById('root');
      root.innerHTML = '<h2>Categories</h2>';
      const list = document.createElement('div');
      cats.forEach(c=>{ const d = document.createElement('div'); d.className='card'; d.innerHTML = `<strong>${c.name}</strong> <button data-id="${c._id}">Edit</button>`; list.appendChild(d); });
      root.appendChild(list);
      root.appendChild(document.createElement('hr'));
      const addBtn = document.createElement('button'); addBtn.textContent='Add category'; addBtn.onclick = async ()=>{ const name = prompt('Category name'); if(!name) return; await fetch(API + '/admin/categories', {method:'POST', headers, body: JSON.stringify({name, slug:name.toLowerCase().replace(/\s+/g,'-')})}); render(); }
      root.appendChild(addBtn);
    }
    render();
  })();
  </script>
</body>
</html>
